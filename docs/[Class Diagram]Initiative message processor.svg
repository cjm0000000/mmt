<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg height="641" version="1.1" width="1111" xmlns="http://www.w3.org/2000/svg">
<rect fill="#ffffc8" height="76" stroke="#ffffc8" stroke-width="1" width="104" x="510" y="94"/>
<rect fill="none" height="76" stroke="#3c3cc8" stroke-width="1" width="104" x="510" y="94"/>
<text font-family="Dialog" font-size="12" x="542" y="130">
Service</text>
<text font-family="Dialog" font-size="12" x="524" y="109">
&lt;&lt;interface&gt;&gt;</text>
<rect fill="#3c3cc8" height="1" stroke="#3c3cc8" stroke-width="1" width="104" x="510" y="142"/>
<text font-family="Dialog" font-size="12" x="514" y="157">
getServiceType()</text>
<rect fill="#ffffc8" height="76" stroke="#ffffc8" stroke-width="1" width="232" x="446" y="294"/>
<rect fill="none" height="76" stroke="#3c3cc8" stroke-width="1" width="232" x="446" y="294"/>
<text font-family="Dialog" font-size="12" x="505" y="330">
AccessTokenService</text>
<text font-family="Dialog" font-size="12" x="524" y="309">
&lt;&lt;interface&gt;&gt;</text>
<rect fill="#3c3cc8" height="1" stroke="#3c3cc8" stroke-width="1" width="232" x="446" y="342"/>
<text font-family="Dialog" font-size="12" x="450" y="357">
getAccessToken(cfg : MmtConfig) : String</text>
<polyline fill="none" points="566,294 566,169" stroke="#000000" stroke-width="1"/>
<polygon fill="#ffffff" points="566,169 573,181 559,181" stroke="#ffffff" stroke-width="1"/>
<polygon fill="none" points="566,169 573,181 559,181" stroke="#000000" stroke-width="1"/>
<rect fill="#ffffc8" height="171" stroke="#ffffc8" stroke-width="1" width="321" x="38" y="14"/>
<rect fill="none" height="171" stroke="#3c3cc8" stroke-width="1" width="321" x="38" y="14"/>
<text font-family="Dialog" font-size="12" x="136" y="50">
InitiativeMsgProcessor</text>
<text font-family="Dialog" font-size="12" x="161" y="29">
&lt;&lt;interface&gt;&gt;</text>
<rect fill="#3c3cc8" height="1" stroke="#3c3cc8" stroke-width="1" width="321" x="38" y="62"/>
<text font-family="Dialog" font-size="12" x="42" y="77">
sendTextMsg(msg : TextMessage) : JSONResponse</text>
<text font-family="Dialog" font-size="12" x="42" y="96">
sendImageMsg(msg : ImageMessage) : JSONResponse</text>
<text font-family="Dialog" font-size="12" x="42" y="115">
sendVoiceMsg(msg : VoiceMessage) : JSONResponse</text>
<text font-family="Dialog" font-size="12" x="42" y="134">
sendVideoMsg(msg : IVideo) : JSONResponse</text>
<text font-family="Dialog" font-size="12" x="42" y="153">
sendMusicMsg(msg : MusicMessage) : JSONResponse</text>
<text font-family="Dialog" font-size="12" x="42" y="172">
sendNewsMsg(msg : NewsMessage) : JSONResponse</text>
<rect fill="#c8c8ff" height="157" stroke="#c8c8ff" stroke-width="1" width="331" x="766" y="254"/>
<rect fill="none" height="157" stroke="#000000" stroke-width="1" width="331" x="766" y="254"/>
<text font-family="Dialog" font-size="12" font-style="italic" x="858" y="268">
AbstractInitiativeProcessor</text>
<rect fill="#000000" height="1" stroke="#000000" stroke-width="1" width="331" x="766" y="280"/>
<text font-family="Dialog" font-size="12" x="770" y="295">
accessRepository : AccessRepository</text>
<rect fill="#000000" height="1" stroke="#000000" stroke-width="1" width="331" x="766" y="307"/>
<text font-family="Dialog" font-size="12" font-style="italic" x="770" y="322">
getAccessTokenRequestParams(config : MmtConfig) : Map</text>
<text font-family="Dialog" font-size="12" font-style="italic" x="770" y="341">
getCommonUrl() : String</text>
<text font-family="Dialog" font-size="12" font-style="italic" x="770" y="360">
sendError(errorMsg : String)</text>
<text font-family="Dialog" font-size="12" x="770" y="379">
getAccessToken(cfg : MmtConfig) : String</text>
<text font-family="Dialog" font-size="12" font-style="italic" x="770" y="398">
checkConfigType(config : MmtConfig)</text>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="766" x2="761" y1="334" y2="334"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="756" x2="751" y1="334" y2="334"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="746" x2="741" y1="334" y2="334"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="736" x2="731" y1="334" y2="334"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="726" x2="721" y1="334" y2="334"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="716" x2="711" y1="334" y2="334"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="706" x2="701" y1="334" y2="334"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="696" x2="691" y1="334" y2="334"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="686" x2="681" y1="334" y2="334"/>
<polygon fill="#ffffff" points="677,334 689,327 689,341" stroke="#ffffff" stroke-width="1"/>
<polygon fill="none" points="677,334 689,327 689,341" stroke="#000000" stroke-width="1"/>
<text font-family="Dialog" font-size="12" x="694" y="325">
&lt;&lt;realize&gt;&gt;</text>
<rect fill="#ffafaf" height="157" stroke="#ffafaf" stroke-width="1" width="323" x="766" y="470"/>
<rect fill="none" height="157" stroke="#000000" stroke-width="1" width="323" x="766" y="470"/>
<text font-family="Dialog" font-size="12" x="873" y="484">
WeiXinCommonAPI</text>
<rect fill="#000000" height="1" stroke="#000000" stroke-width="1" width="323" x="766" y="496"/>
<text font-family="Dialog" font-size="12" x="770" y="511">
COMMON_URL : String</text>
<rect fill="#000000" height="1" stroke="#000000" stroke-width="1" width="323" x="766" y="523"/>
<text font-family="Dialog" font-size="12" x="770" y="538">
getServiceType() : ServiceType</text>
<text font-family="Dialog" font-size="12" x="770" y="557">
getAccessTokenRequestParams(cfg : MmtConfig) : String</text>
<text font-family="Dialog" font-size="12" x="770" y="576">
getCommonUrl() : String</text>
<text font-family="Dialog" font-size="12" x="770" y="595">
sendError(errorMsg : String)</text>
<text font-family="Dialog" font-size="12" x="770" y="614">
checkConfigType(config : MmtConfig)</text>
<polyline fill="none" points="926,470 926,410" stroke="#000000" stroke-width="1"/>
<polygon fill="#ffffff" points="926,410 933,422 919,422" stroke="#ffffff" stroke-width="1"/>
<polygon fill="none" points="926,410 933,422 919,422" stroke="#000000" stroke-width="1"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="198" x2="198" y1="230" y2="225"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="198" x2="198" y1="220" y2="215"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="198" x2="198" y1="210" y2="205"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="198" x2="198" y1="200" y2="195"/>
<line fill="#000000" stroke="#000000" stroke-width="1" x1="198" x2="198" y1="190" y2="185"/>
<polygon fill="#ffffff" points="198,184 205,196 191,196" stroke="#ffffff" stroke-width="1"/>
<polygon fill="none" points="198,184 205,196 191,196" stroke="#000000" stroke-width="1"/>
<text font-family="Dialog" font-size="12" x="119" y="220">
&lt;&lt;realize&gt;&gt;</text>
<rect fill="#c8c8ff" height="195" stroke="#c8c8ff" stroke-width="1" width="377" x="14" y="230"/>
<rect fill="none" height="195" stroke="#3c3cc8" stroke-width="1" width="377" x="14" y="230"/>
<text font-family="Dialog" font-size="12" font-style="italic" x="118" y="244">
AbstractInitiativeMsgProcessor</text>
<rect fill="#3c3cc8" height="1" stroke="#3c3cc8" stroke-width="1" width="377" x="14" y="256"/>
<text font-family="Dialog" font-size="12" x="18" y="271">
initiativeProcessor : AccessTokenService</text>
<rect fill="#3c3cc8" height="1" stroke="#3c3cc8" stroke-width="1" width="377" x="14" y="283"/>
<text font-family="Dialog" font-size="12" x="18" y="298">
sendTextMsg(msg : TextMessage) : JSONResponse</text>
<text font-family="Dialog" font-size="12" x="18" y="317">
sendImageMsg(msg : ImageMessage) : JSONResponse</text>
<text font-family="Dialog" font-size="12" x="18" y="336">
sendMusicMsg(msg : MusicMessage) : JSONResponse</text>
<text font-family="Dialog" font-size="12" x="18" y="355">
sendNewsMsg(msg : NewsMessage) : JSONResponse</text>
<text font-family="Dialog" font-size="12" font-style="italic" x="18" y="374">
getInitiativeProcessor() : AccessTokenService</text>
<text font-family="Dialog" font-size="12" x="18" y="393">
getSendMsgUrl(cfg : MmtConfig) : String</text>
<text font-family="Dialog" font-size="12" x="18" y="412">
sendMsg(cfg : MmtConfig,msg : SimpleMessage) : JSONResponse</text>
<polyline fill="none" points="390,334 446,334" stroke="#000000" stroke-width="1"/>
<polygon fill="#000000" points="390,334 400,329 410,334 400,339" stroke="#000000" stroke-width="1"/>
<polygon fill="none" points="390,334 400,329 410,334 400,339" stroke="#000000" stroke-width="1"/>
<rect fill="#ffafaf" height="119" stroke="#ffafaf" stroke-width="1" width="311" x="38" y="486"/>
<rect fill="none" height="119" stroke="#000000" stroke-width="1" width="311" x="38" y="486"/>
<text font-family="Dialog" font-size="12" x="112" y="500">
WeiXinInitiativeMsgProcessor</text>
<rect fill="#000000" height="1" stroke="#000000" stroke-width="1" width="311" x="38" y="512"/>
<text font-family="Dialog" font-size="12" x="42" y="527">
commonAPI : WeiXinCommonAPI</text>
<rect fill="#000000" height="1" stroke="#000000" stroke-width="1" width="311" x="38" y="539"/>
<text font-family="Dialog" font-size="12" x="42" y="554">
getInitiativeProcessor() : AccessTokenService</text>
<text font-family="Dialog" font-size="12" x="42" y="573">
sendVoiceMsg(msg : VoiceMessage) : JSONResponse</text>
<text font-family="Dialog" font-size="12" x="42" y="592">
sendVideoMsg(msg : IVideo) : JSONResponse</text>
<polyline fill="none" points="348,542 766,542" stroke="#000000" stroke-width="1"/>
<polygon fill="#000000" points="348,542 358,537 368,542 358,547" stroke="#000000" stroke-width="1"/>
<polygon fill="none" points="348,542 358,537 368,542 358,547" stroke="#000000" stroke-width="1"/>
<polyline fill="none" points="198,486 198,424" stroke="#000000" stroke-width="1"/>
<polygon fill="#ffffff" points="198,424 205,436 191,436" stroke="#ffffff" stroke-width="1"/>
<polygon fill="none" points="198,424 205,436 191,436" stroke="#000000" stroke-width="1"/>
</svg>
